<div *ngIf="currentSong" class="now-playing">
  <p>üéµ Reproduciendo: {{ currentSong?.album || 'Desconocido' }} - {{ currentSong?.cantante?.nombre || 'Artista desconocido' }}</p>
</div>

<ul class="song-list">
  <li *ngFor="let song of songs" class="song-item">
    <img 
      *ngIf="song.imagen" 
      [src]="song.imagen.startsWith('http') ? song.imagen : 'https://res.cloudinary.com/dbt58u6ag/image/upload/v1740519430/' + song.imagen" 
      alt="{{ song.album || 'Sin t√≠tulo' }} Cover" 
      class="song-image" 
    />
    
    <div class="song-info">
      <h4>{{ song.album || '√Ålbum desconocido' }}</h4>
      <p>{{ song.cantante?.cantante || 'Artista desconocido' }}</p>
    </div>
    
    <div class="song-actions">
      <button title="Reproducir" (click)="playSong(song)">‚ñ∂Ô∏è</button>
      <button title="Pausar" (click)="pauseSong()" [disabled]="!isPlaying">‚è∏Ô∏è</button>
      <button title="A√±adir a playlist" (click)="addToPlaylist(song)">‚ûï</button>
    </div>
  </li>
</ul>

<!-- Modal para agregar a playlist -->
<div *ngIf="showModal" class="modal-overlay">
  <div class="modal-content">
    <h3>Selecciona una playlist</h3>
    
    <ul *ngIf="playlists.length > 0" class="playlist-list">
      <li *ngFor="let playlist of playlists">
        <button (click)="confirmAddToPlaylist(playlist._id)">{{ playlist.nombre }}</button>
      </li>
    </ul>

    <div class="new-playlist">
      <h4>O crea una nueva:</h4>
      <input type="text" [(ngModel)]="newPlaylistName" placeholder="Nombre de la playlist">
      <button (click)="createNewPlaylist()">Crear Playlist</button>
    </div>

    <button class="close-btn" (click)="closeModal()">Cancelar</button>
  </div>
</div>
