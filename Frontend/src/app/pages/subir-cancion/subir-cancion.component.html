<app-header></app-header>

<div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6">
  <h2 class="text-xl font-semibold text-center">Subir Canción</h2>

  <form [formGroup]="cancionForm" (ngSubmit)="subirCancion()" class="mt-4">
    <div class="mb-4">
      <label class="block text-gray-700">Cantante</label>
      <input formControlName="cantante" type="text" required class="w-full px-3 py-2 border border-gray-300 rounded"/>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Nombre de la Canción</label>
      <input formControlName="cancion" type="text" required class="w-full px-3 py-2 border border-gray-300 rounded"/>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Álbum</label>
      <input formControlName="album" type="text" required class="w-full px-3 py-2 border border-gray-300 rounded"/>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Género</label>
      <input formControlName="genero" type="text" required class="w-full px-3 py-2 border border-gray-300 rounded"/>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Seleccionar Canción (MP3, WAV)</label>
      <input type="file" (change)="seleccionarArchivo($event, 'song')" accept="audio/*" required
             class="w-full px-3 py-2 border border-gray-300 rounded"/>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700">Seleccionar Imagen (Opcional)</label>
      <input type="file" (change)="seleccionarArchivo($event, 'image')" accept="image/*"
             class="w-full px-3 py-2 border border-gray-300 rounded"/>
    </div>

    <button type="submit" [disabled]="cargando || cancionForm.invalid || !archivoCancion"
            class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
      {{ cargando ? 'Subiendo...' : 'Subir Canción' }}
    </button>

    <p *ngIf="mensaje" class="mt-3 text-center text-sm text-red-600">{{ mensaje }}</p>
  </form>
</div>
